-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module('vrp', 'lib/Tunnel')
local Proxy = module('vrp', 'lib/Proxy')
vRP = Proxy.getInterface('vRP')
safeZone = {}
Tunnel.bindInterface('vrp_admin', safeZone)

---------------------------------------------------------------------------------------------------------
-- SAFEZONE
---------------------------------------------------------------------------------------------------------
Config = {}

Config.ExibirNotify = false
Config.ExibirBorda = false
Config.AlturaBorda = 50

Config.Zones = {
    [1] = {
        debug = false,
        zones = {
            {871.8314819335938, -2094.809326171875, 30.4151611328125},
            {918.8055419921875, -2098.832275390625, 30.49572372436523},
            {914.378173828125, -2140.1640625, 30.56702613830566},
            {867.6763305664063, -2136.09716796875, 30.52760696411132},
            {864.9105224609375, -2169.423828125, 30.51926803588867},
            {857.5433959960938, -2168.4755859375, 30.66126632690429},
            {860.04638671875, -2137.01708984375, 30.58418464660644},
            {860.199462890625, -2135.814453125, 30.58555793762207},
            {860.3058471679688, -2133.629638671875, 30.62810325622558},
            {844.0006713867188, -2133.47265625, 35.40868759155273},
            {847.5943603515625, -2092.987548828125, 33.45895385742187},
            {863.5558471679688, -2094.64501953125, 30.18993759155273},
            {871.8535766601563, -2094.84521484375, 30.41615676879882}
        }
    },
    [2] = {
        debug = false,
        zones = {
            {-780.6256103515625, -1515.205078125, 5.10246562957763},
            {-774.508056640625, -1521.967529296875, 6.41425704956054},
            {-758.8418579101563, -1537.4134521484376, 5.41209745407104},
            {-716.8778686523438, -1519.7568359375, 5.41209840774536},
            {-710.5525512695313, -1497.079345703125, 12.66153144836425},
            {-708.6663818359375, -1491.7215576171876, 12.38283252716064},
            {-705.4374389648438, -1485.850830078125, 12.05365562438964},
            {-703.2933349609375, -1482.63623046875, 11.886079788208},
            {-701.0343017578125, -1479.51220703125, 11.71616840362548},
            {-698.7528076171875, -1476.475341796875, 11.55815029144287},
            {-697.2021484375, -1474.42626953125, 11.48264026641845},
            {-695.8195190429688, -1472.8643798828126, 11.42404651641845},
            {-694.896484375, -1471.699462890625, 11.38218593597412},
            {-693.7803955078125, -1470.3642578125, 11.33315849304199},
            {-688.7265014648438, -1464.61181640625, 11.16413879394531},
            {-685.881591796875, -1461.5091552734376, 11.10812187194824},
            {-682.70556640625, -1458.1787109375, 11.06412982940673},
            {-677.4721069335938, -1453.209228515625, 11.02002620697021},
            {-673.7338256835938, -1449.9359130859376, 11.05360507965087},
            {-669.9481811523438, -1446.2379150390626, 11.20482730865478},
            {-669.1939086914063, -1444.281005859375, 11.6478853225708},
            {-668.640869140625, -1442.9027099609376, 11.6478853225708},
            {-668.3388061523438, -1441.928466796875, 11.6478853225708},
            {-668.2753295898438, -1440.7047119140626, 11.6478853225708},
            {-668.1408081054688, -1438.65380859375, 11.6478853225708},
            {-668.0518188476563, -1436.9635009765626, 11.6478853225708},
            {-664.5872802734375, -1371.0263671875, 11.64057922363281},
            {-663.776123046875, -1351.6495361328126, 11.58897876739502},
            {-674.1234130859375, -1351.8424072265626, 10.99228763580322},
            {-677.1737060546875, -1352.0745849609376, 10.70169258117675},
            {-680.8143310546875, -1352.531005859375, 10.35331630706787},
            {-682.5787963867188, -1352.7845458984376, 10.17114067077636},
            {-685.2661743164063, -1353.2862548828126, 9.81410026550293},
            {-687.6235961914063, -1353.8045654296876, 9.49364566802978},
            {-690.8828735351563, -1354.5206298828126, 8.99638271331787},
            {-694.8003540039063, -1355.6903076171876, 8.45230865478515},
            {-698.1380615234375, -1357.23828125, 7.99171066284179},
            {-701.3482666015625, -1359.8153076171876, 7.47739124298095},
            {-704.0169067382813, -1362.297119140625, 7.18649959564209},
            {-706.4346923828125, -1364.741943359375, 6.87369728088378},
            {-708.9468383789063, -1367.7581787109376, 6.63109922409057},
            {-711.2882690429688, -1370.7017822265626, 6.44358539581298},
            {-713.6536865234375, -1373.62158203125, 6.33151960372924},
            {-715.5684814453125, -1375.9100341796876, 6.56823968887329},
            {-716.7044677734375, -1375.0167236328126, 5.10203218460083},
            {-718.0914916992188, -1373.7630615234376, 5.10203742980957},
            {-792.672607421875, -1462.443115234375, 5.00074052810668},
            {-793.005126953125, -1463.160888671875, 5.000741481781},
            {-787.0499877929688, -1479.5413818359376, 5.00073909759521},
            {-786.1532592773438, -1481.546142578125, 1.53037941455841},
            {-784.0570068359375, -1486.254150390625, 1.59464931488037},
            {-810.0857543945313, -1496.096435546875, 1.04529619216918},
            {-801.6591186523438, -1516.2528076171876, 1.84702670574188},
            {-784.01171875, -1509.4803466796876, 3.03144431114196},
            {-780.3897094726563, -1515.05712890625, 5.10197401046752}
        }
    },
    [3] = {
        debug = false,
        zones = {
            {-2056.48,-424.79,11.49},
            {-2134.19,-511.66,1.85},
            {-2060.39,-583.45,3.56},
            {-1982.51,-486.87,11.98},
            {-2020.43,-454.48,11.47},
            {-2056.27,-425.16,11.49},
        }
    },
    [4] = {
        debug = false,
        zones = {
            {110.68853759765625, -1046.1866455078126, 29.27338981628418},
            {151.97515869140626, -1060.3634033203126, 29.21198081970215},
            {158.5602264404297, -1042.181640625, 29.29426956176757},
            {194.3822479248047, -1053.8065185546876, 29.30454063415527},
            {213.49830627441407, -1021.6884765625, 29.25054740905761},
            {266.011474609375, -876.4080200195313, 29.12412071228027},
            {261.3167419433594, -866.0999755859375, 29.29192733764648},
            {187.3701629638672, -838.8338623046875, 30.9227237701416},
            {183.7364044189453, -843.916015625, 31.10396194458007},
            {172.20645141601563, -872.543701171875, 30.58413887023925},
            {161.2340087890625, -889.6113891601563, 30.31418991088867},
            {125.73072052001953, -988.490234375, 29.20618820190429},
            {118.34481048583985, -1025.3502197265626, 29.35762214660644}
        }
    },
    [5] = {
        debug = false,
        zones = {
            {657.22314453125, 1391.598388671875, 322.9329833984375},
            {635.2335205078125, 1243.0343017578126, 334.7742919921875},
            {874.4273071289063, 1244.1666259765626, 350.8212585449219},
            {887.587890625, 1313.137451171875, 346.6427001953125},
            {858.3080444335938, 1362.893310546875, 346.1311340332031},
            {781.27197265625, 1387.284912109375, 341.25689697265627},
            {722.9765625, 1364.423583984375, 335.88427734375},
            {677.6709594726563, 1374.127197265625, 327.3083801269531}
        }
    },
    [6] = {
        debug = false,
        zones = {
            {-216.50753784179688, 6549.10498046875, 11.09255409240722},
            {-219.04786682128907, 6546.0205078125, 11.08882713317871},
            {-222.37478637695313, 6541.29150390625, 11.05685997009277},
            {-222.98280334472657, 6540.01611328125, 11.08219146728515},
            {-221.9871368408203, 6538.2705078125, 11.11426353454589},
            {-194.9915771484375, 6519.7548828125, 11.23280620574951},
            {-179.62518310546876, 6534.03564453125, 11.44891262054443},
            {-176.61575317382813, 6537.396484375, 11.71959209442138},
            {-172.55755615234376, 6544.7578125, 11.39256858825683},
            {-172.2769317626953, 6547.44384765625, 11.25627613067627},
            {-172.7889862060547, 6550.8505859375, 11.12153625488281},
            {-173.54681396484376, 6552.0908203125, 11.17319393157959},
            {-174.26097106933595, 6553.25537109375, 11.12344074249267},
            {-187.50320434570313, 6566.1298828125, 11.03120517730712},
            {-190.9510040283203, 6569.42822265625, 10.80053901672363},
            {-193.14891052246095, 6570.88232421875, 10.8306131362915},
            {-193.64144897460938, 6570.65673828125, 10.79670715332031},
            {-197.22735595703126, 6567.79541015625, 11.12906551361084},
            {-207.13429260253907, 6577.78369140625, 11.02073287963867},
            {-213.49493408203126, 6571.86767578125, 11.02230453491211},
            {-275.5960998535156, 6634.0751953125, 10.86579322814941},
            {-251.49571228027345, 6658.6640625, 10.86518669128418},
            {-303.0789794921875, 6710.44287109375, 10.86458110809326},
            {-321.8794250488281, 6691.427734375, 10.86440277099609},
            {-329.71795654296877, 6699.02880859375, 6.45282411575317},
            {-368.0791931152344, 6661.0966796875, 5.02697372436523},
            {-363.0325927734375, 6660.94189453125, 6.46915245056152},
            {-338.431884765625, 6636.3427734375, 6.46974372863769},
            {-331.0139465332031, 6643.1494140625, 6.4691481590271},
            {-329.55462646484377, 6644.6435546875, 10.86579990386962},
            {-297.31451416015627, 6612.39892578125, 10.86578750610351},
            {-287.800537109375, 6621.923828125, 10.86579990386962},
            {-215.896728515625, 6549.9677734375, 11.07748126983642},
            {-216.4671630859375, 6548.8642578125, 11.09228038787841}
        }
    },
    [7] = {
        debug = false,
        zones = {
            {-216.50753784179688, 6549.10498046875, 11.09255409240722},
            {-219.04786682128907, 6546.0205078125, 11.08882713317871},
            {-222.37478637695313, 6541.29150390625, 11.05685997009277},
            {-222.98280334472657, 6540.01611328125, 11.08219146728515},
            {-221.9871368408203, 6538.2705078125, 11.11426353454589},
            {-194.9915771484375, 6519.7548828125, 11.23280620574951},
            {-179.62518310546876, 6534.03564453125, 11.44891262054443},
            {-176.61575317382813, 6537.396484375, 11.71959209442138},
            {-172.55755615234376, 6544.7578125, 11.39256858825683},
            {-172.2769317626953, 6547.44384765625, 11.25627613067627},
            {-172.7889862060547, 6550.8505859375, 11.12153625488281},
            {-173.54681396484376, 6552.0908203125, 11.17319393157959},
            {-174.26097106933595, 6553.25537109375, 11.12344074249267},
            {-187.50320434570313, 6566.1298828125, 11.03120517730712},
            {-190.9510040283203, 6569.42822265625, 10.80053901672363},
            {-193.14891052246095, 6570.88232421875, 10.8306131362915},
            {-193.64144897460938, 6570.65673828125, 10.79670715332031},
            {-197.22735595703126, 6567.79541015625, 11.12906551361084},
            {-207.13429260253907, 6577.78369140625, 11.02073287963867},
            {-213.49493408203126, 6571.86767578125, 11.02230453491211},
            {-275.5960998535156, 6634.0751953125, 10.86579322814941},
            {-251.49571228027345, 6658.6640625, 10.86518669128418},
            {-303.0789794921875, 6710.44287109375, 10.86458110809326},
            {-321.8794250488281, 6691.427734375, 10.86440277099609},
            {-329.71795654296877, 6699.02880859375, 6.45282411575317},
            {-368.0791931152344, 6661.0966796875, 5.02697372436523},
            {-363.0325927734375, 6660.94189453125, 6.46915245056152},
            {-338.431884765625, 6636.3427734375, 6.46974372863769},
            {-331.0139465332031, 6643.1494140625, 6.4691481590271},
            {-329.55462646484377, 6644.6435546875, 10.86579990386962},
            {-297.31451416015627, 6612.39892578125, 10.86578750610351},
            {-287.800537109375, 6621.923828125, 10.86579990386962},
            {-215.896728515625, 6549.9677734375, 11.07748126983642},
            {-216.4671630859375, 6548.8642578125, 11.09228038787841}
        }
    },
    [8] = {
        debug = false,
        zones = {
            {-1016.7636108398438, -2677.504150390625, 13.95743083953857},
            {-998.0038452148438, -2645.12353515625, 13.98075866699218},
            {-981.4871826171875, -2654.145751953125, 13.99257373809814},
            {-992.2942504882813, -2674.15673828125, 13.98074531555175},
            {-978.4038696289063, -2682.5107421875, 13.99227142333984},
            {-939.0982055664063, -2705.210693359375, 13.96777725219726},
            {-950.6282348632813, -2713.51904296875, 13.94155406951904},
            {-956.6821899414063, -2715.89013671875, 13.93833065032959},
            {-965.6070556640625, -2717.447021484375, 13.95602893829345},
            {-969.9849853515625, -2717.542236328125, 13.97159099578857},
            {-980.5299072265625, -2716.583740234375, 14.0280704498291},
            {-989.5118408203125, -2713.7490234375, 13.94392871856689},
            {-992.7665405273438, -2712.2861328125, 13.97018432617187},
            {-1000.0146484375, -2708.107177734375, 14.08540534973144},
            {-1008.8795776367188, -2703.190673828125, 13.8332986831665},
            {-1011.8406372070313, -2706.321533203125, 13.66599559783935},
            {-1013.697265625, -2706.96337890625, 13.6663122177124},
            {-1015.4296875, -2707.04345703125, 13.6663122177124},
            {-1017.2542114257813, -2706.59912109375, 13.73298835754394},
            {-1019.7091064453125, -2705.1484375, 13.75665092468261},
            {-1024.759765625, -2702.21826171875, 13.75530624389648},
            {-1026.03173828125, -2701.10595703125, 13.66277980804443},
            {-1026.8656005859376, -2700.051025390625, 13.66627311706543},
            {-1027.4088134765626, -2698.61181640625, 13.66631031036377},
            {-1027.5989990234376, -2697.038818359375, 13.68146800994873},
            {-1027.3194580078126, -2695.571044921875, 13.84654331207275},
            {-1026.7236328125, -2694.35595703125, 13.97335910797119},
            {-1026.00927734375, -2693.16796875, 13.98108482360839},
            {-1016.6808471679688, -2677.355712890625, 13.95828437805175}
        }
    },
    [9] = {
        debug = false,
        zones = {
            {-1016.7636108398438, -2677.504150390625, 13.95743083953857},
            {-998.0038452148438, -2645.12353515625, 13.98075866699218},
            {-981.4871826171875, -2654.145751953125, 13.99257373809814},
            {-992.2942504882813, -2674.15673828125, 13.98074531555175},
            {-978.4038696289063, -2682.5107421875, 13.99227142333984},
            {-939.0982055664063, -2705.210693359375, 13.96777725219726},
            {-950.6282348632813, -2713.51904296875, 13.94155406951904},
            {-956.6821899414063, -2715.89013671875, 13.93833065032959},
            {-965.6070556640625, -2717.447021484375, 13.95602893829345},
            {-969.9849853515625, -2717.542236328125, 13.97159099578857},
            {-980.5299072265625, -2716.583740234375, 14.0280704498291},
            {-989.5118408203125, -2713.7490234375, 13.94392871856689},
            {-992.7665405273438, -2712.2861328125, 13.97018432617187},
            {-1000.0146484375, -2708.107177734375, 14.08540534973144},
            {-1008.8795776367188, -2703.190673828125, 13.8332986831665},
            {-1011.8406372070313, -2706.321533203125, 13.66599559783935},
            {-1013.697265625, -2706.96337890625, 13.6663122177124},
            {-1015.4296875, -2707.04345703125, 13.6663122177124},
            {-1017.2542114257813, -2706.59912109375, 13.73298835754394},
            {-1019.7091064453125, -2705.1484375, 13.75665092468261},
            {-1024.759765625, -2702.21826171875, 13.75530624389648},
            {-1026.03173828125, -2701.10595703125, 13.66277980804443},
            {-1026.8656005859376, -2700.051025390625, 13.66627311706543},
            {-1027.4088134765626, -2698.61181640625, 13.66631031036377},
            {-1027.5989990234376, -2697.038818359375, 13.68146800994873},
            {-1027.3194580078126, -2695.571044921875, 13.84654331207275},
            {-1026.7236328125, -2694.35595703125, 13.97335910797119},
            {-1026.00927734375, -2693.16796875, 13.98108482360839},
            {-1016.6808471679688, -2677.355712890625, 13.95828437805175}
        }
    },
    [10] = {
        debug = false,
        zones = {
            {1161.883056640625, -530.8112182617188, 64.86891174316406},
            {1160.1307373046876, -579.490234375, 64.26361846923828},
            {1186.477294921875, -727.9530639648438, 59.07556915283203},
            {1187.147705078125, -744.8124389648438, 58.33251953125},
            {1165.9898681640626, -753.3826904296875, 57.9617805480957},
            {1060.9853515625, -751.7846069335938, 57.79976654052734},
            {1049.9290771484376, -794.0902709960938, 58.27434921264648},
            {1032.0218505859376, -795.0593872070313, 58.01413345336914},
            {1007.6864624023438, -765.61669921875, 58.00586318969726},
            {1034.7601318359376, -736.9637451171875, 57.61426544189453},
            {1000.3128662109375, -694.8072509765625, 57.47338485717773},
            {989.9000854492188, -673.1203002929688, 57.43085098266601},
            {997.4769287109375, -660.0201416015625, 57.92588806152344},
            {1014.8296508789063, -653.1281127929688, 58.49578094482422},
            {1021.5446166992188, -642.5620727539063, 58.87193298339844},
            {1026.2159423828126, -608.187255859375, 58.84514617919922},
            {1035.368408203125, -567.2644653320313, 59.69236373901367},
            {1036.7535400390626, -540.6307373046875, 60.72845077514648},
            {1048.1046142578126, -529.2476196289063, 61.58880615234375},
            {1152.0986328125, -517.9030151367188, 64.9063949584961},
            {1161.006591796875, -521.8003540039063, 64.9403076171875}
        }
    },
    [11] = {
        debug = false,
        zones = {
            {-1612.655029296875, -1097.3897705078126, 13.01835060119628},
            {-1676.70166015625, -1059.8289794921876, 13.15348815917968},
            {-1586.222412109375, -956.3824462890625, 12.93969440460205},
            {-1529.9598388671876, -997.6124267578125, 13.01734828948974},
            {-1610.550048828125, -1093.676025390625, 13.01838302612304}
        }
    },
    [12] = {
        debug = false,
        zones = {
            {-402.95074462890627, 2804.790771484375, 46.00234985351562},
            {-369.4669494628906, 2859.972900390625, 42.95634841918945},
            {-298.0008544921875, 2869.6826171875, 51.6266975402832},
            {-260.39154052734377, 2842.439697265625, 50.7874755859375},
            {-303.87872314453127, 2756.1513671875, 64.50281524658203},
            {-402.12957763671877, 2804.31494140625, 45.80316925048828}
        }
    },
    [13] = {
        debug = false,
        zones = {
            {-3632.3,-4014.14,57.5},
            {-3650.0,-4014.21,57.37},
            {-3654.76,-4009.18,57.42},
            {-3654.43,-4001.96,57.4},
            {-3629.36,-3930.91,57.45},
            {-3631.47,-3924.38,57.47},
            {-3702.26,-3866.78,57.41},
            {-3708.36,-3863.98,57.45},
            {-3824.59,-3868.26,57.39},
            {-3830.49,-3871.75,57.38},
            {-3904.71,-3944.6,57.63},
            {-3909.14,-3950.06,57.47},
            {-3941.85,-4037.76,57.31},
            {-3941.69,-4045.07,57.21},
            {-3937.03,-4153.6,57.27},
            {-3934.69,-4159.79,57.4},
            {-3822.34,-4230.37,57.3},
            {-3815.82,-4230.12,57.63},
            {-3719.98,-4215.83,57.41},
            {-3713.62,-4213.53,57.22},
            {-3656.56,-4153.87,57.19},
            {-3652.71,-4147.62,57.23},
            {-3660.87,-4094.0,57.54},
            {-3658.47,-4057.86,57.54},
            {-3658.43,-4035.53,57.53},
            {-3658.68,-4028.87,57.4},
            {-3625.52,-4028.9,57.54},
            {-3625.98,-4014.36,57.54},
            {-3632.84,-4014.02,57.5}
        }
    },
    -- [13] = {
    --     debug = false,
    --     zones = {
    --         {1851.3970947265626, 2539.400146484375, 45.67307662963867},  -- prisao
    --         {1851.3851318359376, 2671.636962890625, 45.66975784301758},
    --         {1855.2841796875, 2677.628662109375, 45.66888427734375},
    --         {1856.5152587890626, 2683.4990234375, 45.75026702880859},
    --         {1858.242431640625, 2691.897705078125, 45.88459396362305},
    --         {1857.315673828125, 2700.994384765625, 45.91770553588867},
    --         {1853.36865234375, 2711.363037109375, 45.91996765136719},
    --         {1849.2587890625, 2716.318603515625, 45.91482925415039},
    --         {1836.33935546875, 2728.437744140625, 45.89994430541992},
    --         {1792.3929443359376, 2764.3232421875, 45.83105087280273},
    --         {1774.810791015625, 2771.50439453125, 45.67914962768555},
    --         {1760.484130859375, 2772.4609375, 45.68252182006836},
    --         {1685.2657470703126, 2768.8447265625, 45.66593933105469},
    --         {1648.8038330078126, 2765.710693359375, 45.67806243896484},
    --         {1632.998779296875, 2758.411376953125, 45.67434692382812},
    --         {1577.8663330078126, 2703.213134765625, 45.67713928222656},
    --         {1558.603759765625, 2680.26806640625, 45.67609786987305},
    --         {1551.5762939453126, 2665.80419921875, 45.67493057250976},
    --         {1524.234375, 2585.9306640625, 45.66787719726562},
    --         {1523.38427734375, 2561.98095703125, 45.67210006713867},
    --         {1531.518310546875, 2462.470458984375, 45.67412567138672},
    --         {1538.763671875, 2452.99072265625, 45.9188232421875},
    --         {1550.994873046875, 2444.26171875, 45.67066955566406},
    --         {1642.21044921875, 2389.919189453125, 45.67831802368164},
    --         {1659.1363525390626, 2384.87353515625, 45.68136215209961},
    --         {1664.0728759765626, 2384.680419921875, 45.68503189086914},
    --         {1761.5655517578126, 2399.2216796875, 45.64948272705078},
    --         {1767.2020263671876, 2401.745361328125, 45.68307495117187},
    --         {1803.35107421875, 2428.78076171875, 45.68362426757812},
    --         {1834.76513671875, 2467.716552734375, 45.67772674560547},
    --         {1848.768310546875, 2494.328125, 45.67745971679687},
    --         {1854.78759765625, 2511.09765625, 45.6703987121582},
    --         {1856.5660400390626, 2521.771728515625, 45.69085311889648},
    --         {1855.642333984375, 2526.64404296875, 45.84513092041015},
    --         {1855.6798095703126, 2532.767822265625, 45.68163681030273},
    --         {1851.3970947265626, 2539.400146484375, 45.67307662963867}
    --     }
    -- },
    [14] = {
        debug = false,
        zones = {
            { -363.53, -863.01, 31.49 },
            { -350.0, -867.24, 32.37 },
            { -338.04, -869.48, 32.39 },
            { -319.42, -872.08, 32.39 },
            { -300.32, -875.6, 32.44 },
            { -291.03, -877.64, 32.47 },
            { -282.25, -880.06, 32.47 },
            { -268.36, -885.37, 31.22 },
            { -282.67, -925.1, 31.21 },
            { -298.32, -919.42, 31.21 },
            { -306.88, -912.52, 31.07 },
            { -343.14, -904.9, 31.07 },
            { -364.03, -900.44, 31.21 },
            { -363.91, -862.95, 31.49 }
        }
    },
    [15] = {
        debug = false,
        zones = {
            { -216.50753784179688, 6549.10498046875, 11.09255409240722 },
            { -219.04786682128907, 6546.0205078125, 11.08882713317871 },
            { -222.37478637695313, 6541.29150390625, 11.05685997009277 },
            { -222.98280334472657, 6540.01611328125, 11.08219146728515 },
            { -221.9871368408203, 6538.2705078125, 11.11426353454589 },
            { -194.9915771484375, 6519.7548828125, 11.23280620574951 },
            { -179.62518310546876, 6534.03564453125, 11.44891262054443 },
            { -176.61575317382813, 6537.396484375, 11.71959209442138 },
            { -172.55755615234376, 6544.7578125, 11.39256858825683 },
            { -172.2769317626953, 6547.44384765625, 11.25627613067627 },
            { -172.7889862060547, 6550.8505859375, 11.12153625488281 },
            { -173.54681396484376, 6552.0908203125, 11.17319393157959 },
            { -174.26097106933595, 6553.25537109375, 11.12344074249267 },
            { -187.50320434570313, 6566.1298828125, 11.03120517730712 },
            { -190.9510040283203, 6569.42822265625, 10.80053901672363 },
            { -193.14891052246095, 6570.88232421875, 10.8306131362915 },
            { -193.64144897460938, 6570.65673828125, 10.79670715332031 },
            { -197.22735595703126, 6567.79541015625, 11.12906551361084 },
            { -207.13429260253907, 6577.78369140625, 11.02073287963867 },
            { -213.49493408203126, 6571.86767578125, 11.02230453491211 },
            { -275.5960998535156, 6634.0751953125, 10.86579322814941 },
            { -251.49571228027345, 6658.6640625, 10.86518669128418 },
            { -303.0789794921875, 6710.44287109375, 10.86458110809326 },
            { -321.8794250488281, 6691.427734375, 10.86440277099609 },
            { -329.71795654296877, 6699.02880859375, 6.45282411575317 },
            { -368.0791931152344, 6661.0966796875, 5.02697372436523 },
            { -363.0325927734375, 6660.94189453125, 6.46915245056152 },
            { -338.431884765625, 6636.3427734375, 6.46974372863769 },
            { -331.0139465332031, 6643.1494140625, 6.4691481590271 },
            { -329.55462646484377, 6644.6435546875, 10.86579990386962 },
            { -297.31451416015627, 6612.39892578125, 10.86578750610351 },
            { -287.800537109375, 6621.923828125, 10.86579990386962 },
            { -215.896728515625, 6549.9677734375, 11.07748126983642 },
            { -216.4671630859375, 6548.8642578125, 11.09228038787841 }
        }
    },
    [16] = {
        debug = false,
        zones = {
            { -1016.7636108398438, -2677.504150390625, 13.95743083953857 },
            { -998.0038452148438, -2645.12353515625, 13.98075866699218 },
            { -981.4871826171875, -2654.145751953125, 13.99257373809814 },
            { -992.2942504882813, -2674.15673828125, 13.98074531555175 },
            { -978.4038696289063, -2682.5107421875, 13.99227142333984 },
            { -939.0982055664063, -2705.210693359375, 13.96777725219726 },
            { -950.6282348632813, -2713.51904296875, 13.94155406951904 },
            { -956.6821899414063, -2715.89013671875, 13.93833065032959 },
            { -965.6070556640625, -2717.447021484375, 13.95602893829345 },
            { -969.9849853515625, -2717.542236328125, 13.97159099578857 },
            { -980.5299072265625, -2716.583740234375, 14.0280704498291 },
            { -989.5118408203125, -2713.7490234375, 13.94392871856689 },
            { -992.7665405273438, -2712.2861328125, 13.97018432617187 },
            { -1000.0146484375, -2708.107177734375, 14.08540534973144 },
            { -1008.8795776367188, -2703.190673828125, 13.8332986831665 },
            { -1011.8406372070313, -2706.321533203125, 13.66599559783935 },
            { -1013.697265625, -2706.96337890625, 13.6663122177124 },
            { -1015.4296875, -2707.04345703125, 13.6663122177124 },
            { -1017.2542114257813, -2706.59912109375, 13.73298835754394 },
            { -1019.7091064453125, -2705.1484375, 13.75665092468261 },
            { -1024.759765625, -2702.21826171875, 13.75530624389648 },
            { -1026.03173828125, -2701.10595703125, 13.66277980804443 },
            { -1026.8656005859376, -2700.051025390625, 13.66627311706543 },
            { -1027.4088134765626, -2698.61181640625, 13.66631031036377 },
            { -1027.5989990234376, -2697.038818359375, 13.68146800994873 },
            { -1027.3194580078126, -2695.571044921875, 13.84654331207275 },
            { -1026.7236328125, -2694.35595703125, 13.97335910797119 },
            { -1026.00927734375, -2693.16796875, 13.98108482360839 },
            { -1016.6808471679688, -2677.355712890625, 13.95828437805175 }
        }
    },
    [17] = {
        debug = false,
        zones = {
            {845.13, -994.39, 28.21},
            {806.1, -994.39, 26.18},
            {805.51, -988.9, 26.17},
            {801.1, -988.97, 26.07},
            {801.2, -924.42, 26.17},
            {845.57, -924.54, 26.52},
            {845.66, -993.94, 28.26},
        }
    },
    -- [18] = {
    --     debug = false,
    --     zones = {
    --         {-2320.31, 461.57, 175.34},
    --         {-2325.96, 408.07, 175.34},
    --         {-2328.54, 403.46, 175.34},
    --         {-2330.63, 395.46, 175.36},
    --         {-2359.22, 382.83, 175.34},
    --         {-2331.58, 319.71, 170.35},
    --         {-2332.93, 317.78, 170.33},
    --         {-2369.67, 301.09, 170.35},
    --         {-2371.41, 297.01, 170.35},
    --         {-2354.79, 259.51, 170.39},
    --         {-2339.23, 266.47, 170.39},
    --         {-2295.36, 286.62, 169.59},
    --         {-2233.17, 316.03, 176.45},
    --         {-2251.62, 357.17, 174.6},
    --         {-2239.46, 362.33, 175.39},
    --         {-2246.83, 378.77, 175.37},
    --         {-2237.6, 383.04, 175.34},
    --         {-2252.01, 415.65, 175.36},
    --         {-2270.49, 407.17, 175.34},
    --         {-2275.31, 415.11, 175.34},
    --         {-2282.63, 421.94, 175.34},
    --         {-2292.07, 427.09, 175.36},
    --         {-2288.87, 457.93, 175.34},
    --         {-2320.31, 461.57, 175.34},
    --     }
    -- },
    [19] = {
        debug = false,
        zones = { -- HOSPITAL SUL
            {1096.53, -1447.51, 36.4},
            {1094.3, -1535.48, 35.28},
            {1102.08, -1535.27, 36.34},
            {1117.79, -1631.82, 34.88},
            {1149.87, -1632.69, 36.21},
            {1194.32, -1576.65, 35.06},
            {1242.72, -1507.26, 37.09},
            {1259.32, -1500.09, 38.77},
            {1244.67, -1453.06, 34.93},
            {1222.37, -1452.8, 34.68},
            {1203.46, -1447.99, 34.96}
        },
    }, 
    [20] = {
        debug = false,
        zones = { -- HOSPITAL CENTRO
            {-519.23,-350.65,35.35},
            {-487.25,-354.76,34.49},
            {-464.2,-357.78,34.02},
            {-422.17,-363.11,32.49},
            {-413.53,-298.1,34.71},
            {-452.53,-264.22,35.84},
            {-545.9,-303.24,35.1},
            {-519.5,-350.3,35.33}
        },
    }, 
}


Citizen.CreateThread(
    function()
        local zonesTable = {}

        for k, v in pairs(Config.Zones) do
            table.insert(zonesTable, v)
        end

        Config.Zones = zonesTable
    end
)

local inRoyale = false
RegisterNetEvent(
    'royale:inRoyale',
    function(status)
        inRoyale = status
    end
)

local function InsideSafe(coords)
    local regiao = false
    local index = 0
    for id = 1, #Config.Zones do
        local Zone = Config.Zones[id].zones
        local j = #Zone
        for i = 1, #Zone do
            if (Zone[i][2] < coords.y and Zone[j][2] >= coords.y or Zone[j][2] < coords.y and Zone[i][2] >= coords.y) then
                if
                    (Zone[i][1] + (coords[2] - Zone[i][2]) / (Zone[j][2] - Zone[i][2]) * (Zone[j][1] - Zone[i][1]) <
                        coords.x)
                 then
                    regiao = not regiao
                    index = id
                end
            end
            j = i
        end
    end

    return regiao, index
end

local function has_value(tab, val)
    for index, value in ipairs(tab) do
        if value == val then
            return true
        end
    end
    return false
end

local SaiuSafe = false
local NotificouOut = false
local EntrouSafe = false
local NotificouIn = false
local InDomination = false
local DominationSafe = false

CreateThread(
    function()
        Wait(1000)
        SetGhostedEntityAlpha(254)

        local playerPed, coords, inZone, index

        CreateThread(function()
            while true do
                playerPed = GetPlayerPed(-1)
                coords = GetEntityCoords(playerPed, true)
                inZone, index = InsideSafe(coords)
                Wait(1000)
            end
        end)

        Wait(200)

        while true do
            local sleep = 1000
            if not inRoyale then
                for index = 1, #Config.Zones do
                    if Config.Zones[index] and Config.Zones[index].dominacao or Config.ExibirBorda then
                        if type(Config.Zones[index].zones[1]) == 'table' then
                            Config.Zones[index].zones[1] =
                                vec3(
                                Config.Zones[index].zones[1][1],
                                Config.Zones[index].zones[1][2],
                                Config.Zones[index].zones[1][3]
                            )
                        end

                        local distance = #(coords - Config.Zones[index].zones[1])
                        if distance <= 600 then
                            sleep = 0
                            drawPoly(index)

                            if Config.ExibirBorda then
                                if distance < 200 then
                                    print('SAFEZONE ID: ' .. index)
                                end
                            end
                        end
                    end
                end

                if EntrouSafe and not NotificouIn then
                    NetworkSetFriendlyFireOption(false)
                    SetLocalPlayerAsGhost(true)

                    ClearPlayerWantedLevel(PlayerId())
                    SetCurrentPedWeapon(playerPed, GetHashKey('WEAPON_UNARMED'), true)
                    NotificouIn = true

                    if Config.ExibirNotify then
                        TriggerEvent('Notify', 'importante', 'Você entrou de uma SafeZone!', 8000)
                    end
                -- if (index ~= nil and Config.Zones[index].dominacao ~= nil) then
                --     exports['dominacao']:enteredZone(Config.Zones[index].dominacao)
                -- end
                end

                if SaiuSafe and not NotificouOut then
                    NetworkSetFriendlyFireOption(true)
                    SetLocalPlayerAsGhost(false)

                    NotificouOut = true
                    if Config.ExibirNotify then
                        TriggerEvent('Notify', 'importante', 'Você saiu de uma SafeZone!', 8000)
                    end
                --exports['dominacao']:exitZone()
                end

                if inZone then
                    DominationSafe = Config.Zones[index].hide

                    if Config.Zones[index].hide then
                        if not InDomination then
                            InDomination = true
                            NetworkSetFriendlyFireOption(true)
                            SetLocalPlayerAsGhost(false)
                        end

                        if Config.Zones[index].dominacao then
                            if IsPedSittingInAnyVehicle(playerPed) then
                                local plyVehicle = GetVehiclePedIsIn(playerPed)
                                if plyVehicle > 0 then
                                    SetEntityVelocity(plyVehicle, 0.0, 0.0, 0.0)
                                    TaskLeaveVehicle(playerPed, plyVehicle, 4160)
                                end
                            end
                        end
                    end

                    if not Config.Zones[index].hide then
                        sleep = 0
                        EntrouSafe = true
                        DominationSafe = false
                        SaiuSafe = false
                        NotificouOut = false
                        DisableControlAction(2, 37, true)
                        DisablePlayerFiring(playerPed, true)
                        DisableControlAction(0, 106, true)
                        DisableControlAction(0, 140, true)
                        DisableControlAction(0, 263, true)
                        if IsDisabledControlJustPressed(2, 37) then
                            SetCurrentPedWeapon(playerPed, GetHashKey('WEAPON_UNARMED'), true)
                            if Config.ExibirNotify then
                                TriggerEvent('Notify', 'negado', 'Você não pode puxar arma em uma SafeZone!', 8000)
                            end
                        end
                        if IsDisabledControlJustPressed(0, 106) then
                            SetCurrentPedWeapon(playerPed, GetHashKey('WEAPON_UNARMED'), true)
                            if Config.ExibirNotify then
                                TriggerEvent('Notify', 'negado', 'Você não pode fazer isso em uma SafeZone!', 8000)
                            end
                        end
                        if IsDisabledControlJustPressed(0, 140) then
                            SetCurrentPedWeapon(playerPed, GetHashKey('WEAPON_UNARMED'), true)
                            if Config.ExibirNotify then
                                TriggerEvent('Notify', 'negado', 'Você não pode fazer isso em uma SafeZone!', 8000)
                            end
                        end

                        if Config.Zones[index].dominacao then
                            if IsPedSittingInAnyVehicle(playerPed) then
                                local plyVehicle = GetVehiclePedIsIn(playerPed)
                                if plyVehicle > 0 then
                                    SetEntityVelocity(plyVehicle, 0.0, 0.0, 0.0)
                                    TaskLeaveVehicle(playerPed, plyVehicle, 4160)
                                end
                            end
                        end
                    end
                elseif not inZone then
                    EntrouSafe = false
                    NotificouIn = false
                    InDomination = false
                    DominationSafe = false
                    SaiuSafe = true
                end
            else
                if EntrouSafe then
                    NetworkSetFriendlyFireOption(true)
                    SetLocalPlayerAsGhost(false)
                    EntrouSafe = false
                    InDomination = false
                    NotificouIn = false
                    DominationSafe = false
                    SaiuSafe = true
                end
            end
            Citizen.Wait(sleep)
        end
    end
)

function drawPoly(i)
    local playerPed = GetPlayerPed(-1)
    local Zone = Config.Zones[i].zones

    if Config.Zones[i].debug or Config.ExibirBorda then
        local j = #Zone
        for i = 1, #Zone do
            local zone = Zone[i]
            if i < #Zone then
                local p2 = Zone[i + 1]
                showWall(zone, p2)
            end
        end
        if #Zone > 2 then
            local firstPoint = Zone[1]
            local lastPoint = Zone[#Zone]
            showWall(firstPoint, lastPoint)
        end
    end
end

function showWall(p1, p2)
    local bottomLeft = vector3(p1[1], p1[2], p1[3] - Config.AlturaBorda)
    local topLeft = vector3(p1[1], p1[2], p1[3] + Config.AlturaBorda)
    local bottomRight = vector3(p2[1], p2[2], p2[3] - Config.AlturaBorda)
    local topRight = vector3(p2[1], p2[2], p2[3] + Config.AlturaBorda)
    DrawPoly(bottomLeft, topLeft, bottomRight, 0, 135, 0, 70)
    DrawPoly(topLeft, topRight, bottomRight, 0, 135, 0, 70)
    DrawPoly(bottomRight, topRight, topLeft, 0, 135, 0, 70)
    DrawPoly(bottomRight, topLeft, bottomLeft, 0, 135, 0, 70)
end

safeZone.inSafe = function()
    return (EntrouSafe and not DominationSafe)
end

RegisterCommand(
    'debugsafe',
    function()
        Config.ExibirBorda = not Config.ExibirBorda
        print('DEBUG SAFE STATUS: ', Config.ExibirBorda)
    end
)

RegisterCommand('testzona', function()
    print('chegou aq')
end)
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- DOMINACAO
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local loaded = false
CreateThread(
    function()
        while not loaded do
            if GetResourceState('dominacao') == 'started' then
                loaded = true
                print('Carreguei Thread')
                local zones = exports['dominacao']:dominationZones()
                for index in pairs(zones) do
                    Config.Zones[#Config.Zones + 1] = {
                        debug = true,
                        hide = false,
                        dominacao = index,
                        zones = zones[index].zones
                    }
                end
            end

            Wait(500)
        end
    end
)

function SetDomination(name, status)
    print('Syncronizei Dominacoes')
    for index = 1, #Config.Zones do
        if Config.Zones[index] and Config.Zones[index].dominacao then
            if Config.Zones[index].dominacao == name then
                Config.Zones[index].debug = status
                Config.Zones[index].hide = not status
            end
        end
    end
end

exports('SetDominationSafe', SetDomination)
